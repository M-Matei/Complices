<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <script type="text/javascript" src="script.js"></script>
    <link rel="stylesheet" href="styleLevel.css"></script>

    <title>Évasion télépathique</title>
</head>
<body>
    <main x-data="app()" x-init="">

        <!-- INTERFACE -->
        <section>
            <fieldset>
                <legend><b>Common UI</b></legend>
                <p x-text="'Cycle n°' + nbCycle"></p>
                <p x-text="'Essai n°'+ nbTry"></p>
                <p x-text="'Joueur actif : ' + joueurActif"></p>

                <aside>Historique des actions</aside>
                <div id="scrollable-div"></div>
    
            </fieldset>
        </section>

        <!-- Calque visible -->
        <section>
        </section>


        <!-- SPY -->
        <section x-show="spyBoard">
            <div>
                <h2>SPY board</h2>

                <button @click="explore() ; isDisabled = true" :disabled="isDisabled">Aperçu de tous les calques</button>

                <div>
                    <button @click="displayGrid('SPY','Exit','.grid',true)" :disabled="!isDisabled">Sortie</button>
                    <button @click="displayGrid('SPY','Bordures','.grid',true)" :disabled="!isDisabled">Bordures</button>
                    <button @click="displayGrid('SPY','Mines','.grid',true)" :disabled="!isDisabled">Mines</button>
                    <button @click="displayGrid('SPY','Camera','.grid',true)" :disabled="!isDisabled">Caméra</button>
                    <button @click="displayGrid('SPY','Laser','.grid',true)" :disabled="!isDisabled">Laser</button>
                </div>
            </div>

            <b><p x-text="calqueVisible ? 'Calque visible : ' + calquesText[calqueVisible] : 'Aucun calque visible, choississez-en un dans la liste'"></p></b>
            <b><p x-text="calqueActif ? 'Calque désactivé : ' + calquesText[calqueActif] + ' - ' + calquesExplanationActive[calqueActif] : 'Aucun calque désactivé pour le moment'"></p></b>

            <div id="screenCalqueVisible" class="grid"></div>
            <div x-show="calqueVisible === 'Laser'" x-text="'Nombre de cycles avant prochain déplacement vers le bord opposé au laser : ' + nbCycleBeforeMoveLaser"></div>

            <button @click="giveHand('PRISONNER')">PASSER LA MAIN</button>

        </section>


        <!-- PRISONNER  -->
        <section x-show="!spyBoard">
            <div>
                <h2>PRISONNER board</h2>

                <button @click="player(moves[0])">&uarr;</button>
                <button @click="player(moves[2])">&larr;</button>
                <button @click="player(moves[3])">&rarr;</button>
                <button @click="player(moves[1])">&darr;</button>

                <button @click="act(actions[0]) ; reduce('nbDisjoncteur')" x-text="'Disjoncteur LASER * ' + nbDisjoncteur" :disabled="nbDisjoncteur === 0"></button>
                <button @click="act(actions[5]) ; reduce('nbPiratage')" x-text="'Piratage des caméras * ' + nbPiratage" :disabled="nbPiratage === 0"></button>

                <br><br><fieldset>
                    <legend x-text="'Déminage directionnel * ' + nbDeminage"></legend>
                    <button @click="act(actions[0]) ; reduce('nbDeminage')" :disabled="nbDeminage === 0">&uarr;</button>
                    <button @click="act(actions[2]) ; reduce('nbDeminage')" :disabled="nbDeminage === 0">&larr;</button>
                    <button @click="act(actions[3]) ; reduce('nbDeminage')" :disabled="nbDeminage === 0">&rarr;</button>
                    <button @click="act(actions[1]) ; reduce('nbDeminage')" :disabled="nbDeminage === 0">&darr;</button>
                </fieldset>

                <br><br><div class="gridPrisonner"></div>

                <br><button @click="giveHand('SPY')">PASSER LA MAIN</button>
            </div>

        </section>

    </main>
</body>
</html>